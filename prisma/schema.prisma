generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

// ============================================================
// AUTH & RBAC
// ============================================================

model User {
  id          String    @id @default(uuid())
  email       String    @unique
  password    String
  firstName   String
  lastName    String
  avatarUrl   String?
  phone       String?
  role        Role      @default(DEVELOPER)
  isActive    Boolean   @default(true)
  lastLoginAt DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  refreshTokens    RefreshToken[]
  permissions      UserPermission[]
  workspaceMembers WorkspaceMember[]
  assignedTasks    Task[]          @relation("TaskAssignee")
  createdTasks     Task[]          @relation("TaskCreator")
  timeEntries      TimeEntry[]
  comments         Comment[]
  notifications    Notification[]
  activityLogs     ActivityLog[]
  createdQuotes    Quote[]         @relation("QuoteCreator")
  approvedQuotes   Quote[]         @relation("QuoteApprover")
  createdInvoices  Invoice[]       @relation("InvoiceCreator")
  ticketsAssigned  Ticket[]        @relation("TicketAssignee")
  ticketsCreated   Ticket[]        @relation("TicketCreator")
  wikiPageEdits    WikiPageVersion[]
  assetUploads     Asset[]
  reviewComments   ReviewComment[]
  clientPortal     Client?         @relation("ClientPortalUser")
  assignedLeads    Lead[]          @relation("LeadAssignee")
  googleToken      GoogleToken?
  chatChannels     ChatChannel[]   @relation("ChannelCreator")
  chatMemberships  ChatMember[]
  chatMessages     ChatMessage[]
  taskAttachments  TaskAttachment[]

  @@index([email])
  @@index([role])
  @@map("users")
}

model GoogleToken {
  id           String   @id @default(uuid())
  userId       String   @unique
  accessToken  String   @db.Text
  refreshToken String   @db.Text
  expiresAt    DateTime
  scope        String
  email        String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@map("google_tokens")
}

model RefreshToken {
  id        String   @id @default(uuid())
  userId    String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
  @@index([expiresAt])
  @@map("refresh_tokens")
}

model UserPermission {
  id         String @id @default(uuid())
  userId     String
  module     String // "crm", "erp", "pm", "kb", "content", "support", "admin"
  permission String // "read", "write", "delete", "approve", "admin"
  user       User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, module, permission])
  @@index([userId])
  @@map("user_permissions")
}

enum Role {
  ADMIN
  MANAGER
  SALES
  PM
  DEVELOPER
  CONTENT
  SUPPORT
  CLIENT
}

// ============================================================
// WORKSPACES
// ============================================================

model Workspace {
  id          String   @id @default(uuid())
  name        String
  slug        String   @unique
  description String?
  color       String   @default("#3B82F6")
  icon        String?
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  members  WorkspaceMember[]
  projects Project[]

  @@index([slug])
  @@map("workspaces")
}

model WorkspaceMember {
  id          String        @id @default(uuid())
  workspaceId String
  userId      String
  role        WorkspaceRole @default(MEMBER)
  joinedAt    DateTime      @default(now())

  workspace Workspace @relation(fields: [workspaceId], references: [id], onDelete: Cascade)
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([workspaceId, userId])
  @@index([workspaceId])
  @@index([userId])
  @@map("workspace_members")
}

enum WorkspaceRole {
  OWNER
  ADMIN
  MEMBER
  VIEWER
}

// ============================================================
// CRM & ANAGRAFICA
// ============================================================

model Client {
  id           String       @id @default(uuid())
  companyName  String
  slug         String       @unique
  vatNumber    String?
  fiscalCode   String?
  pec          String?
  sdi          String?
  website      String?
  industry     String?
  source       String?
  status       ClientStatus @default(LEAD)
  notes        String?      @db.Text
  tags         String[]     @default([])
  totalRevenue Decimal      @default(0) @db.Decimal(12, 2)
  portalUserId String?      @unique
  portalUser   User?        @relation("ClientPortalUser", fields: [portalUserId], references: [id])
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt

  contacts     Contact[]
  interactions Interaction[]
  projects     Project[]
  quotes       Quote[]
  invoices     Invoice[]
  tickets      Ticket[]
  documents    Document[]

  @@index([status])
  @@index([slug])
  @@map("clients")
}

enum ClientStatus {
  LEAD
  PROSPECT
  ACTIVE
  INACTIVE
  CHURNED
}

model Contact {
  id        String   @id @default(uuid())
  clientId  String
  firstName String
  lastName  String
  email     String?
  phone     String?
  role      String?
  isPrimary Boolean  @default(false)
  notes     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  client       Client        @relation(fields: [clientId], references: [id], onDelete: Cascade)
  interactions Interaction[]

  @@index([clientId])
  @@index([email])
  @@map("contacts")
}

model Interaction {
  id        String          @id @default(uuid())
  clientId  String
  contactId String?
  type      InteractionType
  subject   String
  content   String?         @db.Text
  date      DateTime        @default(now())
  createdAt DateTime        @default(now())

  client  Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  contact Contact? @relation(fields: [contactId], references: [id])

  @@index([clientId])
  @@index([date])
  @@map("interactions")
}

enum InteractionType {
  CALL
  EMAIL
  MEETING
  NOTE
  WHATSAPP
  SOCIAL
}

model Lead {
  id         String   @id @default(cuid())
  name       String
  email      String
  company    String?
  phone      String?
  service    String?
  message    String   @db.Text
  source     String   @default("website")
  status     String   @default("NEW")
  notes      String?  @db.Text
  assigneeId String?
  assignee   User?    @relation("LeadAssignee", fields: [assigneeId], references: [id])
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([status])
  @@index([createdAt])
  @@map("leads")
}

// ============================================================
// PROJECT MANAGEMENT
// ============================================================

model Project {
  id           String        @id @default(uuid())
  workspaceId  String
  clientId     String?
  name         String
  slug         String        @unique
  description  String?       @db.Text
  status       ProjectStatus @default(PLANNING)
  priority     Priority      @default(MEDIUM)
  startDate    DateTime?
  endDate      DateTime?
  deadline     DateTime?
  budgetAmount Decimal?      @db.Decimal(12, 2)
  budgetHours  Int?
  color        String        @default("#6366F1")
  isArchived   Boolean       @default(false)
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  workspace    Workspace     @relation(fields: [workspaceId], references: [id])
  client       Client?       @relation(fields: [clientId], references: [id])
  tasks        Task[]
  milestones   Milestone[]
  documents    Document[]
  quotes       Quote[]
  invoices     Invoice[]
  tickets      Ticket[]
  assets       Asset[]
  chatChannels ChatChannel[]

  @@index([workspaceId])
  @@index([clientId])
  @@index([status])
  @@index([slug])
  @@map("projects")
}

enum ProjectStatus {
  PLANNING
  IN_PROGRESS
  ON_HOLD
  REVIEW
  COMPLETED
  CANCELLED
}

enum Priority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

model Milestone {
  id        String    @id @default(uuid())
  projectId String
  name      String
  dueDate   DateTime?
  status    String    @default("pending")
  sortOrder Int       @default(0)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  project Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
  tasks   Task[]

  @@index([projectId])
  @@map("milestones")
}

model Task {
  id             String     @id @default(uuid())
  projectId      String?
  milestoneId    String?
  parentId       String?
  assigneeId     String?
  creatorId      String
  title          String
  description    String?    @db.Text
  status         TaskStatus @default(TODO)
  priority       Priority   @default(MEDIUM)
  boardColumn    String     @default("todo")
  sortOrder      Int        @default(0)
  isPersonal     Boolean    @default(false)
  startDate      DateTime?
  dueDate        DateTime?
  completedAt    DateTime?
  estimatedHours Float?
  tags           String[]   @default([])
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt

  project    Project?   @relation(fields: [projectId], references: [id], onDelete: Cascade)
  milestone  Milestone? @relation(fields: [milestoneId], references: [id])
  parent     Task?      @relation("TaskSubtasks", fields: [parentId], references: [id])
  subtasks   Task[]     @relation("TaskSubtasks")
  assignee   User?      @relation("TaskAssignee", fields: [assigneeId], references: [id])
  creator    User       @relation("TaskCreator", fields: [creatorId], references: [id])
  timeEntries    TimeEntry[]
  comments       Comment[]
  dependsOn      TaskDependency[] @relation("DependentTask")
  dependedOnBy   TaskDependency[] @relation("DependencyTask")
  attachments    TaskAttachment[]

  @@index([projectId])
  @@index([assigneeId])
  @@index([creatorId])
  @@index([status])
  @@index([isPersonal])
  @@index([milestoneId])
  @@index([parentId])
  @@index([boardColumn])
  @@map("tasks")
}

model TaskAttachment {
  id           String   @id @default(uuid())
  taskId       String
  uploadedById String
  fileName     String
  fileUrl      String
  fileSize     Int
  mimeType     String
  createdAt    DateTime @default(now())

  task       Task @relation(fields: [taskId], references: [id], onDelete: Cascade)
  uploadedBy User @relation(fields: [uploadedById], references: [id])

  @@index([taskId])
  @@map("task_attachments")
}

model TaskDependency {
  id          String @id @default(uuid())
  taskId      String
  dependsOnId String
  type        String @default("finish_to_start")

  task      Task @relation("DependentTask", fields: [taskId], references: [id], onDelete: Cascade)
  dependsOn Task @relation("DependencyTask", fields: [dependsOnId], references: [id], onDelete: Cascade)

  @@unique([taskId, dependsOnId])
  @@map("task_dependencies")
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  IN_REVIEW
  DONE
  CANCELLED
}

model TimeEntry {
  id          String   @id @default(uuid())
  userId      String
  taskId      String?
  projectId   String?
  date        DateTime @db.Date
  hours       Float
  description String?
  billable    Boolean  @default(true)
  hourlyRate  Decimal? @db.Decimal(8, 2)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  user User  @relation(fields: [userId], references: [id])
  task Task? @relation(fields: [taskId], references: [id])

  @@index([userId])
  @@index([taskId])
  @@index([date])
  @@map("time_entries")
}

// ============================================================
// ERP & FINANCE
// ============================================================

model Quote {
  id                 String      @id @default(uuid())
  clientId           String
  projectId          String?
  creatorId          String
  approverId         String?
  number             String      @unique
  title              String
  content            Json?
  status             QuoteStatus @default(DRAFT)
  subtotal           Decimal     @db.Decimal(12, 2)
  taxRate            Decimal     @default(22) @db.Decimal(5, 2)
  taxAmount          Decimal     @db.Decimal(12, 2)
  total              Decimal     @db.Decimal(12, 2)
  discount           Decimal     @default(0) @db.Decimal(12, 2)
  validUntil         DateTime?
  sentAt             DateTime?
  approvedAt         DateTime?
  rejectedAt         DateTime?
  notes              String?     @db.Text
  clientApproval     Boolean?
  clientApprovalDate DateTime?
  clientApprovalNote String?
  createdAt          DateTime    @default(now())
  updatedAt          DateTime    @updatedAt

  client    Client          @relation(fields: [clientId], references: [id])
  project   Project?        @relation(fields: [projectId], references: [id])
  creator   User            @relation("QuoteCreator", fields: [creatorId], references: [id])
  approver  User?           @relation("QuoteApprover", fields: [approverId], references: [id])
  lineItems QuoteLineItem[]
  invoice   Invoice?

  @@index([clientId])
  @@index([status])
  @@index([number])
  @@map("quotes")
}

model QuoteLineItem {
  id          String  @id @default(uuid())
  quoteId     String
  description String
  quantity    Float   @default(1)
  unitPrice   Decimal @db.Decimal(10, 2)
  total       Decimal @db.Decimal(12, 2)
  sortOrder   Int     @default(0)

  quote Quote @relation(fields: [quoteId], references: [id], onDelete: Cascade)

  @@index([quoteId])
  @@map("quote_line_items")
}

enum QuoteStatus {
  DRAFT
  SENT
  APPROVED
  REJECTED
  EXPIRED
  INVOICED
}

model Invoice {
  id            String        @id @default(uuid())
  clientId      String
  projectId     String?
  creatorId     String
  quoteId       String?       @unique
  number        String        @unique
  title         String
  status        InvoiceStatus @default(DRAFT)
  subtotal      Decimal       @db.Decimal(12, 2)
  taxRate       Decimal       @default(22) @db.Decimal(5, 2)
  taxAmount     Decimal       @db.Decimal(12, 2)
  total         Decimal       @db.Decimal(12, 2)
  discount      Decimal       @default(0) @db.Decimal(12, 2)
  issuedDate    DateTime?
  dueDate       DateTime?
  paidDate      DateTime?
  paidAmount    Decimal?      @db.Decimal(12, 2)
  paymentMethod String?
  notes         String?       @db.Text
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  client              Client              @relation(fields: [clientId], references: [id])
  project             Project?            @relation(fields: [projectId], references: [id])
  creator             User                @relation("InvoiceCreator", fields: [creatorId], references: [id])
  quote               Quote?              @relation(fields: [quoteId], references: [id])
  lineItems           InvoiceLineItem[]
  expenses            Expense[]
  electronicInvoices  ElectronicInvoice[]

  @@index([clientId])
  @@index([status])
  @@index([number])
  @@map("invoices")
}

model InvoiceLineItem {
  id          String  @id @default(uuid())
  invoiceId   String
  description String
  quantity    Float   @default(1)
  unitPrice   Decimal @db.Decimal(10, 2)
  total       Decimal @db.Decimal(12, 2)
  sortOrder   Int     @default(0)

  invoice Invoice @relation(fields: [invoiceId], references: [id], onDelete: Cascade)

  @@index([invoiceId])
  @@map("invoice_line_items")
}

enum InvoiceStatus {
  DRAFT
  SENT
  PAID
  PARTIALLY_PAID
  OVERDUE
  CANCELLED
}

model Expense {
  id          String   @id @default(uuid())
  invoiceId   String?
  category    String
  description String
  amount      Decimal  @db.Decimal(10, 2)
  date        DateTime @db.Date
  receipt     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  invoice Invoice? @relation(fields: [invoiceId], references: [id])

  @@index([date])
  @@index([category])
  @@map("expenses")
}

// ============================================================
// KNOWLEDGE BASE
// ============================================================

model WikiPage {
  id           String   @id @default(uuid())
  parentId     String?
  workspaceId  String?
  title        String
  slug         String
  content      Json?
  contentText  String?  @db.Text
  category     String   @default("general")
  icon         String?
  coverUrl     String?
  sortOrder    Int      @default(0)
  isPublished  Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  parent   WikiPage?         @relation("WikiHierarchy", fields: [parentId], references: [id])
  children WikiPage[]        @relation("WikiHierarchy")
  versions WikiPageVersion[]
  comments Comment[]         @relation("WikiPageComments")

  @@unique([parentId, slug])
  @@index([parentId])
  @@index([workspaceId])
  @@index([category])
  @@index([slug])
  @@map("wiki_pages")
}

model WikiPageVersion {
  id         String   @id @default(uuid())
  pageId     String
  editorId   String
  content    Json?
  version    Int
  changeNote String?
  createdAt  DateTime @default(now())

  page   WikiPage @relation(fields: [pageId], references: [id], onDelete: Cascade)
  editor User     @relation(fields: [editorId], references: [id])

  @@index([pageId])
  @@map("wiki_page_versions")
}

// ============================================================
// CONTENT & CREATIVE
// ============================================================

model Asset {
  id           String   @id @default(uuid())
  projectId    String?
  uploadedById String
  fileName     String
  fileUrl      String
  fileSize     Int
  mimeType     String
  category     String   @default("general")
  tags         String[] @default([])
  description  String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  project    Project?      @relation(fields: [projectId], references: [id])
  uploadedBy User          @relation(fields: [uploadedById], references: [id])
  reviews    AssetReview[]

  @@index([projectId])
  @@index([category])
  @@map("assets")
}

model AssetReview {
  id        String       @id @default(uuid())
  assetId   String
  status    ReviewStatus @default(PENDING)
  dueDate   DateTime?
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt

  asset    Asset           @relation(fields: [assetId], references: [id], onDelete: Cascade)
  comments ReviewComment[]

  @@index([assetId])
  @@index([status])
  @@map("asset_reviews")
}

model ReviewComment {
  id        String   @id @default(uuid())
  reviewId  String
  authorId  String
  content   String   @db.Text
  timestamp Float?
  resolved  Boolean  @default(false)
  createdAt DateTime @default(now())

  review AssetReview @relation(fields: [reviewId], references: [id], onDelete: Cascade)
  author User        @relation(fields: [authorId], references: [id])

  @@index([reviewId])
  @@map("review_comments")
}

enum ReviewStatus {
  PENDING
  IN_REVIEW
  APPROVED
  CHANGES_REQUESTED
}

model SocialPost {
  id          String   @id @default(uuid())
  projectId   String?
  platform    String
  content     String   @db.Text
  mediaUrls   String[] @default([])
  scheduledAt DateTime?
  publishedAt DateTime?
  status      String   @default("draft")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([platform])
  @@index([scheduledAt])
  @@index([status])
  @@map("social_posts")
}

// ============================================================
// SUPPORT
// ============================================================

model Ticket {
  id          String       @id @default(uuid())
  clientId    String
  projectId   String?
  creatorId   String
  assigneeId  String?
  number      String       @unique
  subject     String
  description String       @db.Text
  status      TicketStatus @default(OPEN)
  priority    Priority     @default(MEDIUM)
  category    String       @default("general")
  resolvedAt  DateTime?
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt

  client   Client   @relation(fields: [clientId], references: [id])
  project  Project? @relation(fields: [projectId], references: [id])
  creator  User     @relation("TicketCreator", fields: [creatorId], references: [id])
  assignee User?    @relation("TicketAssignee", fields: [assigneeId], references: [id])
  comments Comment[]

  @@index([clientId])
  @@index([assigneeId])
  @@index([status])
  @@index([number])
  @@map("tickets")
}

enum TicketStatus {
  OPEN
  IN_PROGRESS
  WAITING_CLIENT
  RESOLVED
  CLOSED
}

// ============================================================
// CROSS-CUTTING
// ============================================================

model Comment {
  id         String   @id @default(uuid())
  authorId   String
  taskId     String?
  ticketId   String?
  wikiPageId String?
  content    String   @db.Text
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  author   User      @relation(fields: [authorId], references: [id])
  task     Task?     @relation(fields: [taskId], references: [id], onDelete: Cascade)
  ticket   Ticket?   @relation(fields: [ticketId], references: [id], onDelete: Cascade)
  wikiPage WikiPage? @relation("WikiPageComments", fields: [wikiPageId], references: [id], onDelete: Cascade)

  @@index([taskId])
  @@index([ticketId])
  @@index([wikiPageId])
  @@index([authorId])
  @@map("comments")
}

model Document {
  id              String   @id @default(uuid())
  clientId        String?
  projectId       String?
  name            String
  fileUrl         String
  fileSize        Int?
  mimeType        String?
  category        String   @default("general")
  isClientVisible Boolean  @default(false)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  client  Client?  @relation(fields: [clientId], references: [id])
  project Project? @relation(fields: [projectId], references: [id])

  @@index([clientId])
  @@index([projectId])
  @@index([category])
  @@map("documents")
}

model Notification {
  id        String   @id @default(uuid())
  userId    String
  type      String
  title     String
  message   String
  link      String?
  isRead    Boolean  @default(false)
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isRead])
  @@index([createdAt])
  @@map("notifications")
}

model ActivityLog {
  id         String   @id @default(uuid())
  userId     String
  action     String
  entityType String
  entityId   String
  metadata   Json?
  createdAt  DateTime @default(now())

  user User @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([entityType, entityId])
  @@index([createdAt])
  @@map("activity_logs")
}

// ============================================================
// TEAM CHAT
// ============================================================

model ChatChannel {
  id          String      @id @default(uuid())
  name        String
  slug        String      @unique
  description String?
  type        ChannelType @default(PUBLIC)
  projectId   String?
  createdById String
  isArchived  Boolean     @default(false)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  createdBy User          @relation("ChannelCreator", fields: [createdById], references: [id])
  project   Project?      @relation(fields: [projectId], references: [id])
  members   ChatMember[]
  messages  ChatMessage[]

  @@index([slug])
  @@index([type])
  @@index([createdById])
  @@index([projectId])
  @@map("chat_channels")
}

model ChatMember {
  id         String         @id @default(uuid())
  channelId  String
  userId     String
  role       ChatMemberRole @default(MEMBER)
  lastReadAt DateTime?
  joinedAt   DateTime       @default(now())

  channel ChatChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)
  user    User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([channelId, userId])
  @@index([channelId])
  @@index([userId])
  @@map("chat_members")
}

model ChatMessage {
  id        String          @id @default(uuid())
  channelId String
  authorId  String
  content   String          @db.Text
  type      ChatMessageType @default(TEXT)
  metadata  Json?
  editedAt  DateTime?
  deletedAt DateTime?
  createdAt DateTime        @default(now())

  channel ChatChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)
  author  User        @relation(fields: [authorId], references: [id])

  @@index([channelId, createdAt])
  @@index([authorId])
  @@map("chat_messages")
}

enum ChannelType {
  PUBLIC
  PRIVATE
  DIRECT
  PROJECT
}

enum ChatMemberRole {
  OWNER
  ADMIN
  MEMBER
}

enum ChatMessageType {
  TEXT
  SYSTEM
  FILE_LINK
}

// ============================================================
// ELECTRONIC INVOICING (SDI)
// ============================================================

model ElectronicInvoice {
  id                  String    @id @default(cuid())
  invoiceId           String
  invoice             Invoice   @relation(fields: [invoiceId], references: [id], onDelete: Cascade)
  formatoTrasmissione String    @default("FPR12")
  codiceDestinatario  String?
  pecDestinatario     String?
  xmlContent          String?   @db.Text
  status              String    @default("draft") // draft, generated, sent, delivered, rejected
  sentAt              DateTime?
  deliveredAt         DateTime?
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt

  @@index([invoiceId])
  @@map("electronic_invoices")
}

model CompanyProfile {
  id             String  @id @default(cuid())
  ragioneSociale String
  partitaIva     String
  codiceFiscale  String?
  indirizzo      String
  cap            String
  citta          String
  provincia      String  @db.VarChar(2)
  nazione        String  @default("IT")
  regimeFiscale  String  @default("RF01")
  iban           String?
  pec            String?
  telefono       String?
  email          String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("company_profiles")
}
